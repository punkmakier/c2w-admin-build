import{a as m,v as se,x as oe,r as ne,o as le,c as p,d as _,e as b,j as s,w as n,f as e,F as ie,y as re,t as o,h as w,A as g,k as c}from"./index-b60405b9.js";const ce={class:"grid"},de={class:"flex flex-column align-items-center p-5 surface-overlay border-round"},ue=e("div",{class:"border-circle bg-primary inline-flex justify-content-center align-items-center h-6rem w-6rem -mt-8"},[e("i",{class:"pi pi-question text-5xl"})],-1),me={class:"font-bold text-2xl block mb-2 mt-4"},he={class:"mb-0"},ye={class:"flex align-items-center gap-2 mt-4"},pe={class:"col-12 lg:col-6 xl:col-8"},_e={key:0,class:"card mb-2 bg-random",style:{"padding-bottom":"38px"}},be={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},ge={style:{"font-size":"0.8rem"}},ve={style:{"text-align":"center","margin-top":"10px","font-size":"1.4rem"}},fe={class:"mt-5 text-white",style:{"text-align":"center"}},xe=e("span",{style:{"font-size":"1.3rem","font-weight":"600"}},"Total",-1),we=e("br",null,null,-1),De=e("br",null,null,-1),Ce={style:{"font-size":"2rem","font-weight":"600"}},Se={key:0,class:"col-12 lg:col-6 xl:col-4"},ke={class:"card mb-0"},Ae=e("div",{class:"flex justify-content-between mb-3"},[e("div",null,[e("span",{class:"block text-500 font-medium mb-3"},[e("b",null,"Users & Agents (Success Deposit & Withdraw)")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),Pe={key:1,class:"col-12 lg:col-6 xl:col-3"},Ne={class:"card mb-2 bg-skyblue",style:{height:"159px"}},Te=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium text-white"},[e("b",null,"Total Accounts")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),je={class:"text-center mt-2 text-white"},Be={style:{"font-size":"2rem","font-weight":"600"}},qe={key:2,class:"col-12 lg:col-6 xl:col-3"},Le={class:"card mb-2 bg-yellow1",style:{height:"159px"}},Ie=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium text-white"},[e("b",null,"Total Player Balance")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),We={class:"text-center mt-2 text-white"},Re={style:{"font-size":"2rem","font-weight":"600"}},Ue={key:3,class:"col-12 lg:col-6 xl:col-2"},Me={class:"card mb-2 bg-blue",style:{height:"159px"}},$e=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium text-white"},[e("b",null,"Total Agents")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),Fe={class:"text-center mt-2 text-white"},He={style:{"font-size":"2rem","font-weight":"600"}},Oe={key:4,class:"col-12 lg:col-6 xl:col-2"},Ve={class:"card mb-2 bg-green",style:{height:"159px"}},ze=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium text-white"},[e("b",null,"PLAYER (ONLINE)")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),Ee={class:"text-center mt-2 text-white"},Ye={style:{"font-size":"2rem","font-weight":"600"}},Ge={key:5,class:"col-12 lg:col-6 xl:col-2"},Je={class:"card mb-2 bg-blue",style:{height:"159px"}},Ke=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium text-white"},[e("b",null,"PLAYER (IDLE)")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),Qe={class:"text-center mt-2 text-white"},Xe={style:{"font-size":"2rem","font-weight":"600"}},Ze={class:"col-12"},et={class:"card mb-2",style:{"minx-height":"159px",height:"auto"}},tt=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium"},[e("b",null,"User Withdrawal Request")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),at={class:"mt-3"},st={style:{display:"flex",gap:"10px"}},ot={class:"col-12"},nt={class:"card mb-2",style:{"min-height":"159px",height:"auto"}},lt=e("div",{class:"flex justify-content-between"},[e("div",null,[e("span",{class:"block text-500 font-medium"},[e("b",null,"Agent Withdrawal Request")])]),e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-money-bill text-blue-500 text-xl"})])],-1),it={class:"mt-3"},rt={class:"mb-2"},ct=e("label",{class:"daterangetext"},"Select Dates",-1),dt={class:"",style:{display:"flex","align-items":"center",gap:"15px"}},ht={__name:"DashboardAdmin",setup(ut){const D=a=>a.toLocaleString("en-US",{style:"currency",currency:"PHP"}),V=m({chart:{type:"donut"},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],labels:["User Success Withdraw","User Success Deposit","Agent Withdraw"],dataLabels:{formatter:function(a,r){const l=r.seriesIndex;return"â‚± "+P.value[l].toLocaleString()}}}),T=m([]),C=m(),q=JSON.parse(localStorage.getItem("auth.admin")),h=m(),P=m(),j=m(!1),S=m(),L=se(),v=oe(),f={username:q[0].username,token:q[0].token},k=ne({toppay:0,hpay:0,pagarstar:0,copo:0,total:0}),N=m(),I=m(),W=async()=>{const a=await g.postAdminMonitoring(f);console.log(a),h.value=a,P.value=[a.successWithdraw,a.successDeposit,a.agentSuccessWithdraw],k.toppay=a.toppay,k.hpay=a.hpay,k.pagarstar=a.pagar,k.copo=a.copo,k.total=a.total},R=m(),U=m(),M=m(),z=async()=>{const a=await g.postUserReqWithdrawal(f);R.value=a.user_withdraw,U.value=a.agent_withdraw},$=(a,r,l)=>{console.log(a+" "+r);const u=N.value.filter(y=>y.runningBalance>=r||y.maxWithdrawal<=r&&y.isWithdrawable==1).map(y=>({...y,id:a,type:l}));T.value=u},F=a=>{console.log(),L.require({group:"headless",header:"Are you sure?",message:"Please confirm to process the payment",accept:async()=>{const r={...f,providerID:a.value.providerID,id:a.value.id};try{const l=a.value.type==="user"?await g.approveUserWithdrawal(r):await g.approveAgentWithdrawal(r);console.log(l),l.ErrorCode===1?v.add({severity:"error",summary:"Transaction Failed",detail:l.ErrorMessage,life:5e3}):l.resStatus===0&&v.add({severity:"success",summary:"Success",detail:"Transaction request has been completed.",life:5e3})}catch(l){v.add({severity:"error",summary:"Transaction Failed",detail:l,life:5e3})}}})},E=(a,r)=>{L.require({target:event.currentTarget,message:"Do you want to decline this transaction?",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"Cancel",acceptLabel:"Delete",accept:async()=>{const l={...f,id:a};try{const d=r==="user"?await g.declineUserWithdrawal(l):await g.declineAgentWithdrawal(l);console.log(d),d.error===1?v.add({severity:"error",summary:"Transaction Failed",detail:d.description,life:5e3}):d.resStatus===0&&v.add({severity:"success",summary:"Confirmed",detail:"Request withdrawal has been declined.",life:3e3})}catch(d){v.add({severity:"error",summary:"Transaction Failed",detail:d,life:5e3})}}})},Y=async()=>{const a=await g.getPaymentGateway(f);if(a.resStatus===0){const r=a.data.reduce((l,d)=>l+d.runningBalance,0);I.value=r,N.value=a.data}},H=a=>{const r=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${r}-${l}-${d}`},G=()=>{const a=new Date;return a.setDate(a.getDate()-7),H(a)},J=()=>H(new Date),K=m(G()),Q=m(J()),X=async()=>{const a=C.value.map(d=>{const u=new Date(d),y=u.getFullYear(),A=String(u.getMonth()+1).padStart(2,"0"),i=String(u.getDate()).padStart(2,"0");return`${y}-${A}-${i}`});console.log(a);const r={...f,playUsername:M.value,dateFrom:a[0],dateTo:a[1]},l=await g.fetchHistoryCasino(r);l.resStatus===0?S.value=l.history:(S.value=[],v.add({severity:"error",summary:"No Bet History",detail:l.resMsg,life:1e4}))},Z=async a=>{C.value=[new Date(K.value),new Date(Q.value)],M.value=a;const r=C.value.map(d=>{const u=new Date(d),y=u.getFullYear(),A=String(u.getMonth()+1).padStart(2,"0"),i=String(u.getDate()).padStart(2,"0");return`${y}-${A}-${i}`});console.log(r);const l=await g.fetchHistoryCasino({...f,playUsername:a,dateFrom:r[0],dateTo:r[1]});console.log(l),l.resStatus===0?(S.value=l.history,j.value=!0):(S.value=[],v.add({severity:"error",summary:"No Bet History",detail:l.resMsg,life:1e4}))};return le(()=>{W(),z(),Y(),setInterval(()=>{W()},3e4)}),(a,r)=>{const l=p("Toast"),d=p("ConfirmPopup"),u=p("Button"),y=p("ConfirmDialog"),A=p("apexchart"),i=p("Column"),O=p("Dropdown"),B=p("DataTable"),ee=p("Calendar"),te=p("Dialog");return _(),b("div",ce,[s(l),s(d),s(y,{group:"headless",class:"w-25rem"},{container:n(({message:t,acceptCallback:x,rejectCallback:ae})=>[e("div",de,[ue,e("span",me,o(t.header),1),e("p",he,o(t.message),1),e("div",ye,[s(u,{label:"Confirm",onClick:x},null,8,["onClick"]),s(u,{label:"Cancel",outlined:"",onClick:ae},null,8,["onClick"])])])]),_:1}),e("div",pe,[N.value?(_(),b("div",_e,[e("div",be,[(_(!0),b(ie,null,re(N.value,(t,x)=>(_(),b("div",{class:"card-custom",style:{display:"flex","flex-direction":"column"},key:x},[e("b",ge,o(t.name),1),e("b",ve,o(D(t.runningBalance)),1)]))),128))]),e("div",fe,[xe,we,De,e("span",Ce,o(D(I.value)),1)])])):w("",!0)]),P.value?(_(),b("div",Se,[e("div",ke,[Ae,s(A,{type:"donut",options:V.value,series:P.value,height:"360"},null,8,["options","series"])])])):w("",!0),h.value?(_(),b("div",Pe,[e("div",Ne,[Te,e("div",je,[e("span",Be,o(h.value.playerCount.toLocaleString()),1)])])])):w("",!0),h.value?(_(),b("div",qe,[e("div",Le,[Ie,e("div",We,[e("span",Re,o(D(h.value.playerBalance)),1)])])])):w("",!0),h.value?(_(),b("div",Ue,[e("div",Me,[$e,e("div",Fe,[e("span",He,o(h.value.agentCount.toLocaleString()),1)])])])):w("",!0),h.value?(_(),b("div",Oe,[e("div",Ve,[ze,e("div",Ee,[e("span",Ye,o(h.value.isOnline.toLocaleString()),1)])])])):w("",!0),h.value?(_(),b("div",Ge,[e("div",Je,[Ke,e("div",Qe,[e("span",Xe,o(h.value.isIdle.toLocaleString()),1)])])])):w("",!0),e("div",Ze,[e("div",et,[tt,e("div",at,[s(B,{value:R.value,tableStyle:"min-width: 50rem",paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50]},{default:n(()=>[s(i,{field:"orderID",header:"ORDER ID"},{body:n(t=>[c(o(t.data.orderID),1)]),_:1}),s(i,{field:"category",header:"Username"},{body:n(t=>[c(o(t.data.username),1)]),_:1}),s(i,{field:"quantity",header:"Method"},{body:n(t=>[c(o(t.data.method),1)]),_:1}),s(i,{field:"accountNumber",header:"Account Number"},{body:n(t=>[c(o(t.data.accountNumber),1)]),_:1}),s(i,{field:"accountName",header:"Account Name"},{body:n(t=>[c(o(t.data.accountName),1)]),_:1}),s(i,{field:"quantity",header:"Amount"},{body:n(t=>[c(o(D(t.data.amount)),1)]),_:1}),s(i,{field:"quantity",header:"Date"},{body:n(t=>[c(o(t.data.date),1)]),_:1}),s(i,{field:"quantity",header:"Action"},{body:n(t=>[e("div",st,[s(O,{options:T.value,onClick:x=>$(t.data.id,t.data.amount,"user"),onChange:F,optionLabel:"name",placeholder:"Select Payment",class:"w-full md:w-14rem"},null,8,["options","onClick"]),s(u,{label:"Decline",onClick:x=>E(t.data.id,"user")},null,8,["onClick"]),s(u,{label:"Bet History",onClick:x=>Z(t.data.username),outlined:""},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])])])]),e("div",ot,[e("div",nt,[lt,e("div",it,[s(B,{value:U.value,tableStyle:"min-width: 50rem",paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50]},{default:n(()=>[s(i,{field:"orderID",header:"ORDER ID"},{body:n(t=>[c(o(t.data.orderID),1)]),_:1}),s(i,{field:"category",header:"Username"},{body:n(t=>[c(o(t.data.username),1)]),_:1}),s(i,{field:"method",header:"Method"},{body:n(t=>[c(o(t.data.method),1)]),_:1}),s(i,{field:"accountNumber",header:"Account Number"},{body:n(t=>[c(o(t.data.accountNumber),1)]),_:1}),s(i,{field:"accountName",header:"Account Name"},{body:n(t=>[c(o(t.data.accountName),1)]),_:1}),s(i,{field:"amount",header:"Amount"},{body:n(t=>[c(o(D(t.data.amount)),1)]),_:1}),s(i,{field:"date",header:"Date"},{body:n(t=>[c(o(t.data.date),1)]),_:1}),s(i,{field:"quantity",header:"Action"},{body:n(t=>[s(O,{options:T.value,onClick:x=>$(t.data.id,t.data.amount,"agent"),onChange:F,optionLabel:"name",placeholder:"Select Payment",class:"w-full md:w-14rem"},null,8,["options","onClick"])]),_:1})]),_:1},8,["value"])])])]),s(te,{visible:j.value,"onUpdate:visible":r[1]||(r[1]=t=>j.value=t),modal:"",header:"Bet History",style:{width:"100rem"}},{default:n(()=>[e("div",rt,[ct,e("div",dt,[s(ee,{modelValue:C.value,"onUpdate:modelValue":r[0]||(r[0]=t=>C.value=t),selectionMode:"range",manualInput:!1,numberOfMonths:2},null,8,["modelValue"]),s(u,{label:"Show",outlined:"",onClick:X})])]),s(B,{value:S.value,tableStyle:"min-width: 50rem",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50]},{default:n(()=>[s(i,{field:"category",header:"Username"},{body:n(t=>[c(o(t.data.username),1)]),_:1}),s(i,{field:"before",header:"Before"},{body:n(t=>[c(o(t.data.before),1)]),default:n(()=>[c("d ")]),_:1}),s(i,{field:"after",header:"After"},{body:n(t=>[c(o(t.data.after),1)]),_:1}),s(i,{field:"betAmount",header:"Bet Amount"},{body:n(t=>[c(o(t.data.betAmount),1)]),_:1}),s(i,{field:"winAmount",header:"Win Amount"},{body:n(t=>[c(o(t.data.winAmount),1)]),_:1}),s(i,{field:"provider",header:"Provider"},{body:n(t=>[c(o(D(t.data.provider)),1)]),_:1}),s(i,{field:"date",header:"Date"},{body:n(t=>[c(o(t.data.date),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["visible"])])}}};export{ht as default};
